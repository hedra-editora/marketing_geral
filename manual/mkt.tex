\usemodule[tikz]
\usetikzlibrary{shadows.blur}
\environment{star.env}


\definepapersize    [post]        [width=9.31cm, height=9.31cm]
\definepapersize    [14x21]       [width=140mm, height=210mm]
\setuppapersize     [post]        [14x21]

    
% Cores pré-definidas
% https://wiki.contextgarden.net/Color#Pre-defined_colors
\usecolors[crayola]

% Define cor de fundo (background)

% Retira numeração de página
\setuppagenumbering[location=none]
    

\definefontfamily [FormularRegular] [sans] [Formular]
                   [tf=file:Formular-Regular.otf,
                    it=file:Formular-Italic.otf,
                    bf=file:Formular-Bold.otf,
                    bi=file:Formular-BoldItalic.otf]

\definefontfamily [FormularMI] [sans] [Formular]
                   [tf=file:Formular-regular-mi.otf,
                    bf=file::Formular-black-mi.otf]                   

\definefontfamily [FormularMImedium] [sans] [Formular]
                   [tf=file:Formular-medium-mi.otf,
                    bf=file:Formular-bold-mi.otf]              
\definefontfamily [FormularLight] [sans] [Formular]
                   [tf=file:Formular-Light.otf,
                    it=file:Formular-LightItalic.otf]
\definefontfamily [Times] [rm] [Times New Roman]
                   [tf=file:TimesLTStd-Roman.otf]

        
\setupbodyfont [FormularMI,15pt] 
            
\definecharacterkerning[packed] 
\setupcharacterkerning[packed][factor=-.05] 

\setuplayout[marking=empty,
          location=middle,
          width=89mm,
          height=93mm,
          leftmargin=2mm,
          rightmargin=2mm,
          backspace=2mm,
          header=2mm,
          headerdistance=0mm,
          footer=1mm,
          footerdistance=0mm,
          topspace=0mm,
          leftedge=0mm,
          leftedgedistance=0mm,
          leftmargindistance=0mm,
          rightmargindistance=0mm,
          rightedgedistance=0mm,
          rightedge=0mm,
          topdistance=0mm,
          bottomdistance=0mm,
    %      top=21mm,
    %      bottom=21mm,
]


\definelayout[drops][marking=empty,
          location=middle,
          width=89mm,
          height=93mm,
          leftmargin=2mm,
          rightmargin=2mm,
          backspace=2mm,
          header=2mm,
          headerdistance=0mm,
          footer=1mm,
          footerdistance=0mm,
          topspace=0mm,
          leftedge=0mm,
          leftedgedistance=0mm,
          leftmargindistance=0mm,
          rightmargindistance=0mm,
          rightedgedistance=0mm,
          rightedge=0mm,
          topdistance=0mm,
          bottomdistance=0mm,
    %      top=21mm,
    %      bottom=21mm,
]


\definelayout[MyLayout][
          height=93mm,
%          backspace=5mm,
%          header=6.6mm,
          footer=9mm,
%          topspace=0mm,
%          topdistance=0mm,
%          headerdistance=3mm,
          footerdistance=1mm,
%          bottomdistance=0mm,
]


\definelayer[MyGuides]
\setuplayer[MyGuides][width=\paperwidth, height=.8pt, color=black]
\setlayer[MyGuides]{
    \position(\leftmarginwidth,2.5mm){\FormularMImedium\bold  PRÉ-VENDA A PARTIR DE 22.08.20}
    \position(0,8mm){\blackrule[width=\paperwidth, height=.6pt, color=black]}
    \position(0,\dimexpr\paperheight-\footerheight-.7mm){\blackrule[width=\paperwidth, height=.6pt, color=black]}
    \position(\leftmarginwidth,\dimexpr\paperheight-\footerheight+1.5mm){\switchtobodyfont[7pt]\FormularMImedium\bold SAIBA MAIS:} 
    \position(5cm,\dimexpr\paperheight-\footerheight+1.5mm){\switchtobodyfont[7pt]\FormularMImedium\bold ↙HEDRA.COM.BR}
    \position(5cm,\dimexpr\paperheight-\footerheight+4.5mm){\switchtobodyfont[7pt]\FormularMImedium\bold ↙LINK NA BIO}
    }        



% Defina um novo cabeçalho de página que inclui a camada:
\defineoverlay[headerWithLayer][{\placelayer[MyGuidesHashtag]}]
\setupheadertexts[\setups{text:headerWithLayer}]  


% Use a camada como o plano de fundo do cabeçalho:
\setupbackgrounds[page][header][background=headerWithLayer]



\definelayer[MyGuidesCleaned] 
\setlayer[MyGuidesCleaned]{}

\setupalign[right]


\setuplocalinterlinespace[small]
\setupbackgrounds[header][background=MyGuidesCleaned]
\setupinterlinespace[line=2.5ex]


\setcharacterkerning[packed]

% Comandos

\def\startMyCampaign{\bgroup
            \FormularMI\bold
            \switchtobodyfont[28pt]\bold
            \setupinterlinespace[line=1.9ex]
            \setcharacterkerning[packed]}
\def\stopMyCampaign{\egroup}



\def\Hashtag#1{\setuplayout[MyLayout]
\definelayer[MyGuidesHashtag]
\setuplayer[MyGuidesHashtag]
\startsetups[text:headerWithLayer]
\setlayer[MyGuidesHashtag]{
    \position(0,\dimexpr\paperheight-9mm){\blackrule[width=\paperwidth, height=.6pt, color=black]}
    \position(2.5mm,\dimexpr\paperheight-7mm){\FormularMI \doifelse{#1}{}{azul}{#1}} 
    }               
\stopsetups
\setupbackgrounds[header][background=headerWithLayer]}


\define\Hedra{
\setuplayout[MyLayout]
\setcharacterkerning[reset]\setupbackgrounds[header][background=MyGuidesCleaned]
\Times
\switchtobodyfont[50pt] 

\mbox{}\blank[1.6cm]
\hfill \switchtobodyfont[50pt] hedra \hfill \mbox{}  
}

